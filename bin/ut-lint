#!/usr/bin/env node

var args = [];
args.push('-c');
args.push(require.resolve('../eslint/.eslintrc'));
args.push('--ignore-pattern');
args.push('**/test.js');
args.push('--ignore-pattern');
args.push('**/coverage/**');
args.push('--ignore-pattern');
args.push('**/*.marko.js');

if (typeof process.env.BUILD_NUMBER !== 'undefined') {
    args.push('--ignore-pattern');
    args.push('test.js');
    args.push('-f');
    args.push('checkstyle');
    args.push('-o');
    args.push('lint.xml');
}

var cli = require('eslint/lib/cli');
var exitCode = cli.execute(Array.prototype.concat(process.argv.slice(0, 2), args, process.argv.slice(2)));

process.on('exit', function() {
    process.exit(exitCode);
});
