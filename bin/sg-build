#!/usr/bin/env node
// Software Group Standalone build and release command line utility.

var SgBuild = require('../sg-build.js').SgBuild;

var action = process.argv[2]

var sgBuild = new SgBuild(process.env.BUILD_NUMBER);
sgBuild.setPackageJsonFilePath("./package.json");

switch(action) {
    case "build":
        sgBuild.build();
        break;
    case "get-version":
        console.log(sgBuild.getVersion());
        break;
    case "-h":
        usage();
        break;
    case "help":
        usage();
        break;
    default:
        console.log("\nNo build option specified.\n")
        usage();
}

process.exit(0)

// ------------------------ Utility functions ------------------------
function usage(){
    console.log("\nUsage: sg-build OPTION\n\n");
    console.log("Avaliable options are:");
    console.log("\t build - used for building the current state of a package under development");
    console.log("\t get-version - used for retrieve the current project version");
    console.log("\t help  - prints the help of the command line utility");
}